(()=>{"use strict";new class{constructor(t,e){this.form=document.querySelector(t),this.inputs=this.form.querySelectorAll("[name]:not(ion-icon)"),this.options=e,this.initialize.call(this),this.validate.bind(this)}initialize(){const{inputs:t,form:e}=this,{autofocus:s}=this.options;t.forEach((t=>{const e=t.closest(".form-group");t.onfocus=()=>{e.classList.add("typing")},t.onblur=()=>{e.classList.remove("typing"),this.validateInput(`#${t.id}`)},t.oninput=()=>{this.clearError(t)},s&&t.matches(s)&&t.focus()})),e.onsubmit=t=>this.handleSubmit(t)}required(t){return e=>e?.trim?.().length>0?void 0:t||"Required"}min(t,e){return s=>s?.trim?.().length>=t?void 0:e||`Must be at least ${t} characters`}max(t,e){return s=>s?.trim?.().length<=t?void 0:e||`Must be at most ${t} characters`}showError(t,e){const s=t.closest(".form-group"),r=s.querySelector(".form-message");s.classList.add("invalid"),r.textContent=e}clearError(t){const e=t.closest(".form-group"),s=e.querySelector(".form-message");e.classList.remove("invalid"),s.textContent=""}validate(t){const e={};Object.keys(t).forEach((s=>{const r=t[s];Array.isArray(e[s])||(e[s]=[]),r.forEach((t=>{let r,i,o;if("string"==typeof t?r=t:(r=t.rule,i=t.message),r.includes(":")){const[t,e]=r.split(":");o=this[t](e,i)}else o=this[r](i);e[s].push(o)}))})),this.rules=e}validateInput(t){const e=this.form.querySelector(t),s=this.rules[t];if(!s)return!0;let r;return s.forEach((t=>{r||(r=t(e.value.trim()))})),r&&this.showError(e,r),!r}handleSubmit(t){const{inputs:e}=this;let s=!0,r={};t.preventDefault(),e.forEach((t=>{const e=t.name,i=this.validateInput(`#${e}`);let o;s&&!i&&(s=!1),o="checkbox"===t.type?t.checked:t.value?.trim(),r[e]={value:o,disabled:t.disabled}})),s&&console.log(r)}}("#login",{autofocus:"#username"}).validate({"#username":[{rule:"required",message:"Tên đăng nhập không được phép để trống"},{rule:"min:6",message:"Tên đăng nhập hoặc Email yêu cầu tối thiểu 6 ký tự"},"max:20"],"#password":["required","min:6","max:20"]})})();